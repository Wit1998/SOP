# 计划任务at crontab

## 一次性计划任务

```bash
#使用at命令来执行一次性备份yum仓库文件，为了顺利查看at的执行结果，使用下面命令来关闭ntp同步，并设置你的时间

#关闭ntp同步
timedatectl set-ntp 0
#设置日期和时间
date -s "2022-6-22 11:00:00"
# 上午10点执行，如果已经过了时间，那么顺延第二天
at 11:02AM
# 如果知道的是日期没有时间，则在当天立刻执行
at 2022-6-21
# 准确的时间和日期
at 11:02AM 2022-6-21

#在这一时刻now/midnight/noon/teatime执行(在man中 查看)
at now/midnight/noon/teatime

#在周一执行
at monday

#查看计划列表
atq

#删除计划
atrm

#查看详细的一次性计划任务
at -c xxx(进程号)

#使用控制(在 /etc/at.allow 和 /etc/at.deny)
#白名单权限大于黑名单，如白名单黑名单都有该用户，该用户还是可以调用at
at.allow 白名单
at.deny 黑名单
```

## 周期性计划任务

```bash
分时日月周
# 计划任务实例
# 每分钟一次
* * * * * xxx
# 每小时的整点一次
0 * * * * xxx
# 每天凌晨1点准时运行
0 1 * * * xxx
# 每天凌晨1点这个小时内的
* 1 * * * xxx
# 每个月的第一天的每分钟运行一次
* * 1 * * xxx
# 一月中的每一分钟都运行一次
* * * 1 * xxx
# 每周第0天即周日的每一分钟
* * * * 0 xxx
# 每5分钟一次
0/5 * * * * xxx
# 24小时内，有12小时每5分钟一次
0/5 0/2 * * * xxx
# 每个小时的第一分钟和第10分钟分别运行一次，例如3：01 ，3：10
1 10 * * * xxx
# 每个小时的第15分钟~第20分钟分别运行一次，总共一小时运行6次
15-20 * * * * xxx
# 每年的4-6月
1,2,5-8 0/2 10,15 4-6 *

#精确到秒级的cron任务
# 精确到5s
* * * * * sleep 5 xxx
```

