## FTP、TFTP、SFTP

参考：https://blog.csdn.net/weixin_40274679/article/details/106908808

## **FTP**

说明：提供一种在服务器和客户机之间上传和下载文件的有效方式。

特点：

- 基于TCP的传输，采用双TCP连接方式【服务端的控制连接端口号（服务）为21；数据端口号（传输）在主动方式下为20，被动方式随机】
- 支持授权与认证机制，提供目录列表功能
- 传输模式有ASCll和二进制两种。ASCll用于文本传输，把字符转成ASCll码，收到的客户端再转码成字符；二进制无需转换格式，主要传输图片和程序。
- FTP传输方式：主动和被动，都是针对服务端的主动和被动。（都遵循TCP的三次握手规则：1、确定B\S服务端口 2、确认传输端口 3 、建立通道）

主动方式流程（PORT）：**FTP客户端通过服务的端口号发送PORT命令给FTP服务端的21端口，并告诉服务端临时传输端口号**。服务端收到命令后用20端口去请求客户端的临时传输端口，请求成功就进行传输数据，*传输完毕后服务端主动关闭传输*。

被动方式流程（PASV）：**FTP客户端通过服务端口号发送PASV命令给FTP服务端的21端口，告诉服务端进入被动方式**。于是服务端收到命令后生成一个临时传输的端口号并发送给客户端，客户端收到传输端口后，当需要传输数据时，客户端随机开启一个端口并主动与服务端传输端口建立连接以完成传输。



## **TFTP**

说明：简单文件传输协议，也是采用客户机/服务器模式的文件传输协议；很像停止等待协议；

特点：

- TFTP承载在UDP之上，端口号69

- TFTP协议传输是由客户端发起的

- TFTP适用于客户端和服务器之间不需要复杂交互的环境

- TFTP封装：Ethernet 2/IPv4/UDP/FCS

- TFTP没有存取授权与认证机制，不提供目录列表功能

- 支持ASCII码或二进制传送

- 每次传送的数据PDU中有512字节的数据，但最后一次可不足512字节。数据PDU也称为文件块(block)，每个块按序编号，从1开始

- TFTP只支持文件传输而不支持交互

  

流程：C端发送BLOCK1，S端接受并返回确认值ACK1和下一个需要的BLOCK值，C端接受ACK1并发送BLOCK2，知道接收到一个不为512字节的BLOCK或为0字节的BLOCK为止。

## **SFTP**（ssh的一部分）

说明：

特点：

- SFTP本身没有单独的守护进程，它必须使用ssh守护进程（端口号默认是22）来完成相应的连接和答复操作。

- 使用了基于ssh的加密/解密（对称和非对称结合加密）技术，非常安全

- 传输效率比普通的FTP要低得多

  